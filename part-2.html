<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Formation GIT - 2¬∞</title>
    	<link rel="shortcut icon" href="images/favicon.ico" />

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/white.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">
		<link rel="stylesheet" href="css/custom.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<script src="https://twemoji.maxcdn.com/v/latest/twemoji.min.js" crossorigin="anonymous"></script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<img src="images/git.png"/>
					<p>
						<small>par <a href="https://www.linkedin.com/in/benjamin-dieleman-a2330b95/">Benjamin DIELEMAN <br /></a></small>
						<br />
						<small>d√©cembre 2019</small>
						<br />
						<a href="https://www.atgp.net">
							<img src="images/logo-atgp.png" height="50px" >
						</a>
						&nbsp;&nbsp;
						<a href="https://www.solluz.fr">
							<img src="images/logo-solluz.png" height="50px" >
						</a>
						&nbsp;&nbsp;
						<a href="https://github.com/benito103e/revealjs-formation-git-iut">
							<img src="images/logo-github.png" height="50px" >
						</a>
					</p>
				</section>
				<!-- END Section -->



				<section data-background="#080d2a" data-background-transition="zoom">
					<h2>Objectifs de la s√©ance</h2>
					<ul>
						<li>Sc√©nario pratique sur 2 d√©p√¥ts sur Gitlab</li>
						<li>Un peu de th√©orie au milieu</li>
						<li>Un zeste de bonnes pratiques</li>
					</ul>
					<br /><br />
					<h4>‚Üí √âvaluation semaine suivante</h4>
				</section>
				<!-- END Section -->


				<section data-background="#28498c" data-background-transition="zoom">
					<h2>I. Connexion Gitlab</h2>
					<h4>Cl√© SSH</h4>
					<pre><code data-trim data-noescape class="hljs bash">
						# Cr√©er une cl√© SSH
						ssh-keygen -t rsa -b 2048

						cat ~/.ssh/id_rsa.pub

						# Ajouter au compte Gitlab, puis tester authentification
						ssh git@gitlab.iut-valence.fr
						</code></pre>
				</section>
				<!-- END Section -->


				<section data-background="#080d2a" data-background-transition="zoom">
					<h2>Git remote</h2>
					<ul>
						<li>Lors d'un <code>git clone</code> ou <code>git remote add</code></li>
						<li>Lie notre repo local √† un repo distant</li>
						<li><u>origin</u> : Nom par d√©faut de ce repo distant</li>
						<li>Lien HTTPS / SSH (via protocole GIT)</li>
					</ul>
				</section>
				<!-- END Section -->


				<section>
					<h2>II. Initialiser mon projet</h2>

					<ul>
						<li>Cr√©er projet priv√© sur Gitab <u>git-formation-monidentifiant</u></li>
						<li>Cr√©er dossier projet</li>
					</ul>
					<pre><code data-trim data-noescape class="hljs bash">
						cd
						mkdir git-formation-monidentifiant

						cd git-formation-monidentifiant
						git init
						git remote add origin git@gitlab.iut-valence.fr:monidentifiant/git-formation-monidentifiant.git
						git ci --allow-empty -m "Initial commit"


						git push -u origin master
						</code></pre>

					<br />
					<h4>=> Puis prot√©ger la branche master sur Gitlab</h4>
				</section>
				<!-- END Section -->



				<section data-background="#080d2a" data-background-transition="zoom">
					<h2>Bonnes pratiques commit</h2>
					<h4>Commit atomique &#9762;</h4>
					<ul>
						<li>Il concerne une seule chose</li>
						<li>Il est le plus petit possible (tout en restant coh√©rent)</li>
					</ul>
					<br />
					<br />
					<strong>Ne doit donc pas</strong>
					<br />
					<ul>
						<li>M√©langer une am√©lioration et une correction</li>
						<li>M√©langer plusieurs fonctionnalit√©s / am√©liorations</li>
						<li>M√©langer plusieurs corrections diff√©rentes</li>
					</ul>
				</section>
				<!-- END Section -->

				<section data-background="#080d2a" data-background-transition="zoom">
					<h2>Bonnes pratiques commit</h2>
					<ul>
						<li>En anglais (Sauf indication contraire)</li>
						<li>Titre de commit clair et succinct
							<ul>
								<li>Ce que fait le commit</li>
								<li>Commence par un verbe √† l'imp√©ratif</li>
							</ul>
						</li>
						<li>Description d√©taill√©e si n√©cessaire
							<ul>
								<li>S√©par√© par une ligne vide</li>
								<li>R√©f√©rences au tracker, issues...</li>
								<li>Descriptions / Choix techniques</li>
							</ul>
						</li>
					</ul>
				</section>
				<!-- END Section -->

				<section data-background="#080d2a" data-background-transition="zoom">
					<h2>Bonnes pratiques commit</h2>
					<h4>Exemples de bons messages de commit</h4>
					<pre><code data-trim data-noescape class="hljs">
						Create runner for update job

						¬≠ UpdateJobRunner handle execution of an update job
						1¬∞ Can run a background process to execute the job separately
						2¬∞ Is called by the process to execute the update job
						¬≠ Create UpdateJobRunnerFactory service

						Tracker #1505
						</code></pre>
					<pre><code data-trim data-noescape class="hljs">
						Define directory to store update job reports
						</code></pre>
					<pre><code data-trim data-noescape class="hljs">
						Enable Sqlite database

						Configure Doctrine with pdo_sqlite driver
						</code></pre>
				</section>
				<!-- END Section -->

				<section data-background="#080d2a" data-background-transition="zoom">
					<h2>Bonnes pratiques commit</h2>
					<h4>Exemple de mauvais commit</h4>
					<pre><code data-trim data-noescape class="hljs">
						(BD) Install kilik/table
						</code></pre>
					<pre><code data-trim data-noescape class="hljs">
						Improve the project
						</code></pre>
					<pre><code data-trim data-noescape class="hljs">
						Fix some bugs
						</code></pre>
					<pre><code data-trim data-noescape class="hljs">
						Fix that + Improve this + Add something + Buy coffee
						</code></pre>
					<pre><code data-trim data-noescape class="hljs">
						C'est un trou de verdure o√π chante une rivi√®re, Accrochant follement aux herbes des haillons
						</code></pre>
				</section>
				<!-- END Section -->

				<section data-background="#080d2a" data-background-transition="zoom">
					<h2>Enregistrer des modifications</h2>
					<ol>
						<li>D√©velopper</li>
						<li>Une modification coh√©rente ?</li>
						<li><code>git add {file|directory}</code></li>
						<li><code>git status</code> : V√©rifie l'√©tat du <b>staging</b></li>
						<li><code>git commit</code></li>
						<li>√âcrire un message de commit et valider</li>
					</ol>
				</section>
				<!-- END Section -->


				<section>
					<h2>III. Des commits pour mon d√©p√¥t</h2>
					<pre><code data-trim data-noescape class="hljs bash">
						touch index.html
						git add index.html
						git status
						git commit
					</code></pre>

					<pre><code data-trim data-noescape class="hljs bash">
						nano index.html # &lt;html&gt;&lt;body&gt;&lt;h1&gt;yep&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;
						git add .
						git st
						git ci
					</code></pre>

					<pre><code data-trim data-noescape class="hljs bash">
						touch page.html
						nano index.html # &lt;a href=&quot;page.html&quot;&gt;Page&lt;/a&gt;
						git add .
						git st
						git ci
					</code></pre>


					<pre><code data-trim data-noescape class="hljs bash">
						git push
					</code></pre>
				</section>
				<!-- END Section -->



				<section data-background="#080d2a" data-background-transition="zoom">
					<h2><code>git push</code></h2>

					<ul>
						<li><code>git push {remote} {branche}</code> : Envoi de la branche</li>
						<li><code>git push origin -u new-feature:new-feature</code> : Envoi et lie de la branche</li>
						<li><code>git push origin :new-feature</code> : Supprime branche distante</li>
					</ul>

					<br /><br />

					<h4>Le plus souvent, sur master `git push`</h4>

					<br /><br />

					<code>git push --force</code> :  Jamais pour une branche partag√©e
					<br />
					=> Mais pour mes branches üòá
				</section>
				<!-- END Section -->


				<section data-background="#080d2a" data-background-transition="zoom">
					<h2><code>git checkout</code></h2>

					<pre><code data-trim data-noescape class="hljs bash">
						git checkout {branch/commit}
						# D√©place le `HEAD` et garde les modifs en cours
						# Change de branche ou reviens √† un √©tat ant√©rieur...
					</code></pre>

					<br />
					<img src="images/monkey-jump-branches.jpg" width="50%"/>
					<br />

					<cite>
						‚ö†Ô∏è Les modifications en cours non commit√©es changent de branche avec moi
					</cite>
				</section>
				<!-- END Section -->




				<section data-background="#080d2a" data-background-transition="zoom">
					<h2>Cr√©er une branche</h2>

					<pre><code data-trim data-noescape class="hljs bash">
					git checkout master # Je positionne HEAD sur le master
					git branch test # nouvelle branche depuis HEAD
					git checkout test # positionne sur la branche
					git commit # commit sur la nouvelle branch
					</code></pre>

					<img src="images/git-branch-add-0.png" />
					<img src="images/git-branch-add-1.png" />
					<img src="images/git-branch-add-2.png" />
					<img src="images/git-branch-add-3.png" />


					<br /><br />
					<h4>Ou raccourci :</h4>
					<pre><code data-trim data-noescape class="hljs bash">
					git checkout master -b test
					</code></pre>
					<br />
				</section>
				<!-- END Section -->



				<section>
					<h2>III. Des branches pour mon d√©p√¥t</h2>

					<h4>Branche merg√© via Gitlab</h4>
					<pre><code data-trim data-noescape class="hljs bash">
						git co master -b branche-1
						touch file-1.html  # + commit
						git push origin -u branche-1
					</code></pre>
					<h5>=> merge via Gitlab</h5>


					<h4>Branche merg√© en CLI</h4>
					<pre><code data-trim data-noescape class="hljs bash">
						git co master
						git pull # Log ?
						git co -b branche-2
						touch file-2.html  # + commit
						git co master
						git merge branche-2
						git push # On pousse le master avec la branche merg√©e
					</code></pre>
				</section>




				<section data-background="#080d2a" data-background-transition="zoom">
					<h2>ff vs no-ff</h2>

					<img src="images/git-merge-ff-vs-noff.png" height="836" width="1008"/>
				</section>
				<!-- END Section -->


				<section>
					<h2>III. Des branches pour mon d√©p√¥t</h2>

					<h4>Branche merg√© no-ff en CLI</h4>
					<pre><code data-trim data-noescape class="hljs bash">
						git co master
						git co -b branche-3
						touch file-3.html  # + commit
						git co master
						git merge --no-ff branche-3
						git push
					</code></pre>
				</section>


				<section>
					<h2>IV. D√©p√¥t partag√©</h2>

					<h4>Inviter coll√®gue de droite en "D√©veloppeur"</h4>
					<pre><code data-trim data-noescape class="hljs bash">
						cd ..
						git clone git@gitlab.iut-valence.fr:colleguedegauche/git-formation-colleguedegauche.git
						cd git-formation-colleguedegauche
					</code></pre>

					<h4>Travailler sur ce projet</h4>
					<pre><code data-trim data-noescape class="hljs bash">
						git co master -b branche-monidentifiant
						touch fonction-monidentifiant.html   # + commit
						git push origin -u branche-monidentifiant
					</code></pre>
				</section>


				<section>
					<h2>IV. D√©p√¥t partag√©</h2>

					<h4>J'ai un bug sur mon d√©p√¥t</h4>
					<pre><code data-trim data-noescape class="hljs bash">
						cd ../git-formation-monidentifiant
						git co master
						# Corriger le index.html + commit + push
					</code></pre>

					<br />
					<h4>R√©cup√©rer l'avanc√©e du master</h4>
					<pre><code data-trim data-noescape class="hljs bash">
						cd ../git-formation-colleguedegauche

						# R√©cup√®re son travail sur le master
						git co master
						git fetch  # git log pour voir
						git pull
					</code></pre>
				</section>


				<section>
					<h2>IV. D√©p√¥t partag√©</h2>

					<h4>Prendre en compte la correction dans ma branche</h4>
					<pre><code data-trim data-noescape class="hljs bash">
						git co branche-monidentifiant
						git rebase master
						git push --force
						#¬†‚ö† pas de push --force sur des branches partag√©es
					</code></pre>

					<br />

					<h4>Avant rebase</h4>

					<pre><code data-trim data-noescape class="hljs bash">
					A---B---C---D ‚Üê master
					     \
					      E---F---G ‚Üê new-feature
					</code></pre>

					<h4>Apr√®s rebase</h4>


					<pre><code data-trim data-noescape class="hljs bash">
					A---B---C---D ‚Üê master
					             \
					              E'---F'---G' ‚Üê new-feature
					</code></pre>
				</section>




				<section data-background="#080d2a" data-background-transition="zoom">
					<h2><code>git fetch</code></h2>


					<h4>Importe les informations du repo distant</h4>
					<code>git fetch</code>
					<p>=> Ajoute / Met √† jour les r√©f√©rences <b>origin/*</b></p>

					<br />

					<h4>Importe + supprime les r√©f√©rences n'existant plus</h4>
					<code>git fetch --prune</code>

					<br /><br />

					<h4>Affiche les branches locales + distantes</h4>
					<code>git branch --all</code>

				</section>



				<section data-background="#080d2a" data-background-transition="zoom">
					<h2><code>git pull</code></h2>


					<h4>Import + merge les informations distantes</h4>

					<code>git pull {remote}</code><br/>
					<code>git pull {remote} {branche}</code>

					<br /><br />
					<p><cite>
						Les pull sont en mode rebase. <br />
						cf config globale dans .gitconfig
					</cite>
					</p>
				</section>
				<!-- END Section -->

				<section class="text-left">
					<p>
					l1 = log --graph --oneline --decorate --pretty=format:"%C(yellow)%h\\ %ad%Cred%d\\ %Creset%<(50,trunc)%s%Cblue\\ [%cn]" --date=short
					</p>

					<p>
					l2 = log --stat --oneline --decorate --graph --all
					</p>

					<p>
					l5 = log --name-status --graph --oneline --decorate --all --pretty=format:"%C(yellow)%h\\ %Cblue%ad%Cred%d\\ %C(cyan)%<(50,trunc)%s%Cblue\\ [%cn]" --date=short
					</p>
				</section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			  twemoji.parse(document.body);
		  
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				margin: 0.1,
				width: 1680,
				height: 1050,
				hash: true,
				slideNumber: true,
				transition: 'convex',
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
